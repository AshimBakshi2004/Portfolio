<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ashim Bakshi • Portfolio</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Space+Grotesk:wght@600&display=swap" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
  :root {
    --accent: #06b6d4;
    --accent2: #7c3aed;
    --light-bg: #fcfcfe;
    --dark-bg: #181925;
    --glass: rgba(255,255,255,0.65);
    --glass-dark: rgba(34,37,53,0.80);
    --text: #23272f;
    --text-dark: #f7fafc;
    --card-shadow: 0 10px 30px 0 rgba(31,38,135,0.13);
    --radius: 16px;
    --duration: 0.50s;
    --h1: 2.5rem;
    --h2: 2rem;
    --h3: 1.17rem;
    --font-main: 'Inter', 'Segoe UI', Arial, sans-serif;
    --font-display: 'Space Grotesk', 'Montserrat', sans-serif;
  }

  /* Light theme (default) */
  body,
  html[data-theme="light"],
  body[data-theme="light"] {
    background: var(--light-bg);
    color: var(--text);
    --glass: rgba(255,255,255,0.65);
  }

  /* Dark theme */
  html[data-theme="dark"],
  body[data-theme="dark"],
  [data-theme="dark"] {
    background: var(--dark-bg) !important;
    color: var(--text-dark) !important;
    --glass: var(--glass-dark);
    --text: var(--text-dark);
    --light-bg: var(--dark-bg);
    --card-shadow: 0 10px 30px 0 rgba(0,0,0,0.4);
  }

  * {
    box-sizing: border-box;
  }

  html, body {
    margin: 0; padding: 0;
    font-family: var(--font-main);
    background: var(--light-bg);
    color: var(--text);
    scroll-behavior: smooth;
    transition: background 0.4s, color 0.4s;
    min-height: 100vh;
    overflow-x: hidden;
  }

  body.loading {
    overflow: hidden;
    height: 100vh;
  }

  /* Desktop & Mobile Button Fix */
  .btn, button, .view-btn, .hamburger, #theme-toggle, #totop {
    touch-action: manipulation !important;
    -webkit-touch-callout: none !important;
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
    user-select: none !important;
    -webkit-tap-highlight-color: transparent !important;
    cursor: pointer !important;
    outline: none !important;
    border: none !important;
  }

  /* Loader */
  #loader {
    display: flex; align-items: center; justify-content: center;
    position: fixed; z-index: 3333; inset: 0;
    background: linear-gradient(135deg, #7c3aed40 12%, #06b6d420 80%);
    transition: opacity 1s;
  }

  .spinner {
    width: 60px; height: 60px; border-radius: 50%;
    border: 8px solid #7c3aed30;
    border-top: 8px solid var(--accent);
    animation: spin 1.2s linear infinite;
  }

  @keyframes spin { 100% { transform: rotate(360deg); } }

  /* Header/Nav */
  header {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 1002;
    background: var(--glass);
    backdrop-filter: blur(12px);
    box-shadow: 0 2px 20px rgba(0,0,0,0.1);
    display: flex; 
    align-items: center; 
    justify-content: space-between;
    padding: 1rem 2rem;
    min-height: 70px;
  }

  .logo {
    font-family: var(--font-display);
    font-size: 1.7rem;
    color: var(--accent2);
    font-weight: 700;
    flex-shrink: 0;
    text-shadow: 0 1px 10px #8bc7fa40;
  }

  /* Desktop Navigation */
  nav {
    display: flex; 
    gap: 1.5rem;
    font-size: 1rem;
  }

  nav a {
    text-decoration: none;
    color: var(--text);
    font-weight: 600;
    padding: 8px 16px;
    border-radius: 20px;
    transition: all 0.3s ease;
    position: relative;
    white-space: nowrap;
    cursor: pointer;
  }

  nav a.active, nav a:hover {
    background: linear-gradient(90deg, #7c3aed1a, #06b6d41a);
    color: var(--accent2);
    transform: translateY(-2px);
  }

  /* Header Controls Container */
  .header-controls {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    flex-shrink: 0;
  }

  /* Theme Toggle - FIXED FOR MOBILE */
  #theme-toggle {
    background: var(--glass);
    backdrop-filter: blur(8px);
    border: 2px solid rgba(124, 58, 237, 0.2) !important;
    border-radius: 25px;
    padding: 0.6rem 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    cursor: pointer !important;
    font-size: 0.9rem;
    color: var(--accent2);
    font-weight: 600;
    box-shadow: 0 2px 10px rgba(124, 58, 237, 0.15);
    transition: all 0.3s ease;
    position: relative;
    z-index: 1003;
    min-width: 44px;
    min-height: 44px;
    justify-content: center;
    outline: none !important;
    touch-action: manipulation !important;
    user-select: none !important;
  }

  #theme-toggle:hover {
    background: var(--accent2);
    color: white;
    transform: translateY(-1px);
  }

  #theme-toggle i {
    font-size: 1rem;
    transition: transform 0.3s ease;
    pointer-events: none;
  }

  #theme-toggle:hover i {
    transform: rotate(360deg);
  }

  /* Hamburger Menu */
  .hamburger {
    display: none;
    background: var(--glass);
    border: 2px solid rgba(124, 58, 237, 0.2) !important;
    border-radius: 8px;
    padding: 0.6rem;
    font-size: 1.2rem;
    color: var(--accent2);
    cursor: pointer;
    transition: all 0.3s ease;
    min-width: 44px;
    min-height: 44px;
    justify-content: center;
    align-items: center;
  }

  .hamburger:hover {
    background: var(--accent2);
    color: white;
  }

  /* Mobile Navigation Overlay */
  .nav-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0,0,0,0.5);
    z-index: 1999;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .nav-overlay.active {
    opacity: 1;
  }

  .nav-mobile {
    position: fixed;
    top: 0;
    right: 0;
    height: 100vh;
    width: min(300px, 85vw);
    background: var(--glass);
    backdrop-filter: blur(15px);
    box-shadow: -10px 0 30px rgba(0,0,0,0.2);
    z-index: 2000;
    display: flex;
    flex-direction: column;
    padding: 6rem 2rem 2rem;
    transform: translateX(100%);
    transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .nav-mobile.open {
    transform: translateX(0);
  }

  .nav-mobile a {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1.2rem 1rem;
    margin: 0.5rem 0;
    border-radius: 12px;
    font-size: 1.1rem;
    text-align: center;
    background: rgba(255,255,255,0.1);
    transition: all 0.3s ease;
    text-decoration: none;
    color: var(--text);
    font-weight: 600;
    min-height: 48px;
    cursor: pointer;
  }

  .nav-mobile a:hover, .nav-mobile a.active {
    background: var(--accent2);
    color: white;
    transform: translateX(-5px);
  }

  /* HERO */
  #hero {
    padding: 120px 1rem 2rem;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    min-height: 100vh;
    position: relative;
    background: linear-gradient(135deg, #06b6d430 0%, #7c3aed18 76%);
    overflow: hidden;
  }

  .particles {
    position: absolute; inset: 0; width: 100vw; height: 100%;
    z-index: 0; pointer-events: none;
    opacity: .6;
  }

  #hero-content {
    z-index: 1;
    display: flex; flex-direction: column; align-items: center;
    text-align: center;
    max-width: 620px;
    width: 100%;
    margin: 0 auto;
    padding: 0 1rem;
  }

  #hero h1 {
    font-size: var(--h1);
    font-family: var(--font-display);
    letter-spacing: .02em;
    font-weight: 700;
    margin: 0.25em 0 0.16em;
    color: var(--accent2);
    text-shadow: 0 2px 10px #06b6d420;
    line-height: 1.2;
  }

  #typing {
    display: inline-block;
    font-size: 1.25em;
    color: var(--accent);
    font-weight: 600;
    min-height: 2em;
    letter-spacing: .015em;
    margin-bottom: 1rem;
    text-align: center;
    width: 100%;
  }

  #hero p {
    font-size: 1.1rem;
    color: #417cff;
    margin: 0 0 1.5em;
    line-height: 1.6;
    max-width: 90%;
  }

  .hero-img {
    width: 160px; height: 160px;
    border-radius: 50%; object-fit: cover;
    border: 4px solid var(--accent);
    box-shadow: 0 8px 40px #a5b4fc79;
    transition: transform 0.4s ease;
    margin: 1.5rem 0;
  }

  .hero-img:hover {
    transform: scale(1.1) rotate(5deg);
  }

  .hero-btns {
    margin-top: 1rem;
    display: flex; 
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
    width: 100%;
  }

  .btn {
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    color: #fff;
    border: none !important;
    border-radius: 30px;
    font-size: 1rem;
    font-weight: 700;
    padding: 12px 24px;
    box-shadow: 0 4px 15px rgba(6, 182, 212, 0.3);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    position: relative;
    overflow: hidden;
    text-decoration: none;
    display: inline-flex; 
    align-items: center; 
    justify-content: center;
    gap: 0.5rem;
    outline: none !important;
    min-height: 48px;
    white-space: nowrap;
  }

  .btn i { font-size: 1.1em; }

  .btn:hover {
    transform: translateY(-3px) scale(1.05);
    background: linear-gradient(90deg, var(--accent2), #06b6d4);
    box-shadow: 0 8px 25px rgba(124, 58, 237, 0.4);
  }

  /* Section Common Styles */
  .section {
    max-width: 1080px;
    margin: 0 auto;
    padding: 4rem 1.5rem;
    position: relative;
    opacity: 0;
    transform: translateY(50px);
    transition: opacity var(--duration) cubic-bezier(.83,.04,.27,.88), transform var(--duration) cubic-bezier(.83,.04,.27,.88);
  }

  .section.visible {
    opacity: 1;
    transform: none;
  }

  .section-title {
    font-size: var(--h2);
    font-family: var(--font-display);
    font-weight: 700;
    color: var(--accent2);
    text-align: center;
    margin-bottom: 3rem;
    letter-spacing: 0.03em;
    position: relative;
    text-shadow: 0 2px 14px #7c3aed18;
  }

  /* Skills Section */
  #skills {
    background: var(--glass);
    border-radius: var(--radius);
    box-shadow: var(--card-shadow);
    backdrop-filter: blur(8px);
  }

  .skills-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
  }

  .skill-type {
    background: rgba(255,255,255,0.4);
    border-radius: var(--radius);
    box-shadow: 0 4px 15px rgba(124, 58, 237, 0.1);
    padding: 2rem 1.5rem;
    backdrop-filter: blur(4px);
    border: 1px solid rgba(255,255,255,0.2);
  }

  .skill-type h3 {
    font-size: 1.3rem;
    font-family: var(--font-display);
    font-weight: 600;
    margin: 0 0 1.5rem;
    color: var(--accent2);
    letter-spacing: .02em;
  }

  .skills-list {
    list-style: none;
    padding: 0; margin: 0;
    display: flex; flex-wrap: wrap;
    gap: .8rem;
  }

  .skills-list li {
    background: var(--accent2);
    color: #fff;
    padding: 8px 16px;
    border-radius: 20px;
    font-weight: 600;
    font-size: 0.9rem;
    box-shadow: 0 2px 8px rgba(124, 58, 237, 0.3);
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .skills-list li:hover {
    background: var(--accent);
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 4px 12px rgba(6, 182, 212, 0.4);
  }

  /* Progress bars */
  .bars {
    margin: 1.5rem 0 0 0;
  }

  .bar-title { 
    color: var(--text); 
    font-weight: 600; 
    font-size: 0.95rem; 
    margin-bottom: 0.5rem; 
  }

  .bar-bg {
    height: 10px; 
    background: rgba(124, 58, 237, 0.1);
    border-radius: 10px;
    margin-bottom: 1rem; 
    overflow: hidden;
    position: relative;
  }

  .bar-fg {
    height: 10px;
    border-radius: 10px;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    width: 0;
    transition: width 1.5s cubic-bezier(.19,.42,.4,1.2);
    position: relative;
  }

  .bar-fg::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    animation: shimmer 2s infinite;
  }

  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  /* Projects Section */
  #projects {
    background: var(--glass);
    box-shadow: var(--card-shadow);
    border-radius: var(--radius);
    backdrop-filter: blur(8px);
  }

  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;
    max-width: 800px;
    margin: 0 auto;
  }

  .project-card {
    background: rgba(255,255,255,0.6);
    border-radius: var(--radius);
    box-shadow: var(--card-shadow);
    overflow: hidden;
    display: flex; 
    flex-direction: column;
    opacity: 0; 
    transform: translateY(30px);
    transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    backdrop-filter: blur(4px);
    border: 1px solid rgba(255,255,255,0.3);
  }

  .project-card.visible {
    opacity: 1; 
    transform: none;
  }

  .project-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 15px 40px rgba(124, 58, 237, 0.15);
  }

  .project-img {
    width: 100%; 
    height: 200px;
    object-fit: cover;
    transition: all 0.4s ease;
  }

  .project-card:hover .project-img {
    transform: scale(1.1);
  }

  .card-content {
    padding: 1.5rem;
    display: flex; 
    flex-direction: column; 
    flex: 1;
  }

  .card-title {
    font-size: 1.25rem;
    font-family: var(--font-display);
    font-weight: 700;
    color: var(--accent2);
    margin-bottom: 0.5rem;
    line-height: 1.3;
  }

  .card-desc {
    color: #5a6473;
    font-size: 0.95rem;
    line-height: 1.6;
    margin-bottom: 1rem;
    flex: 1;
  }

  .tech-tags {
    margin-bottom: 1rem;
    display: flex; 
    flex-wrap: wrap; 
    gap: 0.5rem;
  }

  .tech {
    font-size: 0.8rem; 
    background: rgba(6, 182, 212, 0.1);
    color: var(--accent2); 
    border-radius: 12px;
    padding: 4px 12px;
    font-weight: 600;
    border: 1px solid rgba(6, 182, 212, 0.2);
  }

  .view-btn {
    align-self: flex-start;
    background: linear-gradient(90deg, var(--accent2), var(--accent));
    color: #fff; 
    border: none !important; 
    border-radius: 25px;
    padding: 10px 20px;
    font-weight: 700; 
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    text-decoration: none;
    min-height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    outline: none !important;
  }

  .view-btn:hover { 
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 6px 20px rgba(124, 58, 237, 0.3);
  }

  /* Modal */
  .modal {
    position: fixed; 
    inset: 0;
    background: rgba(0,0,0,0.7);
    display: none; 
    place-items: center;
    z-index: 3000;
    padding: 1rem;
  }

  .modal.active { 
    display: grid; 
  }

  .modal-content {
    background: var(--glass);
    backdrop-filter: blur(12px);
    box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    border-radius: var(--radius);
    max-width: 500px;
    width: 100%;
    padding: 2rem;
    position: relative;
    color: var(--text);
    max-height: 80vh;
    overflow-y: auto;
  }

  .modal-content h3 { 
    color: var(--accent2); 
    margin: 0 0 1rem;
    font-family: var(--font-display);
    line-height: 1.3;
  }

  .modal-close {
    position: absolute; 
    right: 1rem; 
    top: 1rem;
    font-size: 1.5rem; 
    color: #999;
    cursor: pointer;
    background: none; 
    border: none !important;
    transition: all 0.3s ease;
    padding: 5px;
    border-radius: 50%;
    min-width: 44px;
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    outline: none !important;
  }

  .modal-close:hover { 
    color: var(--accent2); 
    background: rgba(124, 58, 237, 0.1);
    transform: scale(1.1);
  }

  /* Education Timeline */
  #education {
    background: var(--glass);
    border-radius: var(--radius);
    box-shadow: var(--card-shadow);
    backdrop-filter: blur(8px);
  }

  .timeline {
    position: relative; 
    max-width: 700px; 
    margin: 0 auto;
    padding-left: 2rem;
  }

  .timeline::before {
    content: ''; 
    position: absolute; 
    left: 1rem; 
    top: 0; 
    bottom: 0;
    width: 4px; 
    background: linear-gradient(180deg, var(--accent), var(--accent2));
    border-radius: 2px;
  }

  .timeline-item {
    position: relative;
    margin-bottom: 2rem;
    padding-left: 3rem;
    background: rgba(255,255,255,0.4);
    padding: 1.5rem 1.5rem 1.5rem 3rem;
    border-radius: 12px;
    backdrop-filter: blur(4px);
    box-shadow: 0 4px 15px rgba(124, 58, 237, 0.1);
  }

  .timeline-marker {
    position: absolute; 
    left: -2rem; 
    top: 1.5rem; 
    width: 20px; 
    height: 20px;
    background: var(--accent2);
    border-radius: 50%; 
    border: 3px solid var(--light-bg);
    display: flex; 
    align-items: center; 
    justify-content: center;
    color: white;
    font-size: 0.8rem;
  }

  .timeline-title { 
    font-family: var(--font-display); 
    font-size: 1.1rem; 
    font-weight: 700; 
    color: var(--accent2);
    margin-bottom: 0.5rem;
    line-height: 1.3;
  }

  /* Certifications */
  .certifications {
    margin-top: 2rem;
    background: rgba(255,255,255,0.4);
    border-radius: 12px;
    padding: 2rem 1.5rem;
    backdrop-filter: blur(4px);
  }

  .certifications h3 { 
    color: var(--accent2); 
    font-family: var(--font-display);
    margin-bottom: 1rem;
  }

  .certifications ul { 
    list-style: none; 
    padding: 0;
  }

  .certifications li {
    margin-bottom: 0.8rem; 
    padding-left: 1.5rem;
    position: relative;
    line-height: 1.5;
  }

  .certifications li:before {
    content: "\f058"; 
    font-family: "Font Awesome 6 Free"; 
    font-weight: 900; 
    color: var(--accent2);
    position: absolute; 
    left: 0; 
    top: 0;
  }

  /* Contact Section */
  #contact {
    background: var(--glass);
    border-radius: var(--radius);
    box-shadow: var(--card-shadow);
    backdrop-filter: blur(8px);
  }

  .contact-grid {
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
  }

  .contact-item {
    background: rgba(255,255,255,0.4);
    border-radius: 12px;
    padding: 2rem 1.5rem;
    text-align: center;
    box-shadow: 0 4px 15px rgba(124, 58, 237, 0.1);
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    backdrop-filter: blur(4px);
    border: 1px solid rgba(255,255,255,0.2);
    min-height: 140px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  .contact-item:hover {
    background: var(--accent2);
    color: #fff;
    transform: translateY(-5px) scale(1.05);
    box-shadow: 0 10px 30px rgba(124, 58, 237, 0.3);
  }

  .contact-item i {
    font-size: 2rem;
    margin-bottom: 1rem;
    color: var(--accent2);
    transition: all 0.3s ease;
  }

  .contact-item:hover i { 
    color: #fff; 
    transform: scale(1.2);
  }

  .contact-link {
    color: inherit;
    text-decoration: none;
    font-weight: 600;
    word-break: break-all;
  }

  /* Back to Top */
  #totop {
    display: none;
    position: fixed; 
    right: 1.5rem; 
    bottom: 1.5rem;
    background: var(--accent2);
    color: #fff;
    border: none !important;
    font-size: 1.5rem;
    border-radius: 50%;
    width: 50px; 
    height: 50px; 
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(124, 58, 237, 0.3);
    z-index: 1000;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    align-items: center;
    justify-content: center;
    outline: none !important;
  }

  #totop:hover { 
    background: var(--accent); 
    transform: translateY(-3px) scale(1.1);
    box-shadow: 0 8px 30px rgba(6, 182, 212, 0.4);
  }

  /* Footer */
  footer {
    background: rgba(255,255,255,0.8);
    backdrop-filter: blur(8px);
    color: #666;
    text-align: center; 
    padding: 2rem 1rem;
    margin-top: 3rem;
    border-radius: var(--radius) var(--radius) 0 0;
  }

  /* Ensure dark theme styles apply to all elements */
  [data-theme="dark"] .section,
  [data-theme="dark"] .skill-type,
  [data-theme="dark"] .project-card,
  [data-theme="dark"] .contact-item,
  [data-theme="dark"] .modal-content,
  [data-theme="dark"] .timeline-item,
  [data-theme="dark"] .certifications {
    background: var(--glass-dark) !important;
    color: var(--text-dark) !important;
  }

  [data-theme="dark"] footer {
    background: rgba(34, 37, 53, 0.8) !important;
    color: #ccc !important;
  }

  [data-theme="dark"] .card-desc {
    color: #a0a0a0 !important;
  }

  [data-theme="dark"] .bar-title {
    color: var(--text-dark) !important;
  }

  /* Custom Scrollbar */
  ::-webkit-scrollbar { 
    width: 6px;
  }

  ::-webkit-scrollbar-thumb { 
    background: linear-gradient(180deg, var(--accent), var(--accent2));
    border-radius: 4px;
  }

  ::-webkit-scrollbar-track { 
    background: var(--glass);
  }

  /* Fix for link buttons */
  a.btn {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    text-decoration: none !important;
  }

  /* MOBILE BUTTON FIX */
  @media (max-width: 768px) {
    :root {
      --h1: 2.2rem;
      --h2: 1.8rem;
      --h3: 1.1rem;
    }

    #theme-toggle {
      /* Force proper touch handling on mobile */
      -webkit-tap-highlight-color: rgba(124, 58, 237, 0.3);
      -tap-highlight-color: rgba(124, 58, 237, 0.3);
      -webkit-touch-callout: default;
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
      touch-action: manipulation;
      /* Ensure button is large enough for touch */
      min-width: 50px;
      min-height: 50px;
      /* Prevent iOS zoom on touch */
      font-size: 16px;
    }
    
    .hamburger {
      min-width: 50px;
      min-height: 50px;
      font-size: 16px;
    }
    
    /* Fix for all mobile buttons */
    .btn, button, .view-btn {
      -webkit-tap-highlight-color: rgba(124, 58, 237, 0.3);
      -tap-highlight-color: rgba(124, 58, 237, 0.3);
      font-size: 16px; /* Prevent iOS zoom */
      min-height: 48px;
      touch-action: manipulation;
    }

    header {
      padding: 1rem 1rem;
      min-height: 65px;
    }
    
    .logo {
      font-size: 1.4rem;
    }
    
    nav {
      display: none;
    }
    
    .hamburger {
      display: flex;
    }
    
    .nav-overlay {
      display: block;
    }
    
    #theme-toggle span {
      display: none;
    }
    
    #theme-toggle {
      padding: 0.5rem;
    }
    
    #hero {
      padding: 100px 1rem 2rem;
      min-height: 90vh;
    }

    #hero h1 {
      font-size: 2rem;
      line-height: 1.1;
    }

    #typing {
      font-size: 1rem;
      min-height: 1.5em;
    }

    #hero p {
      font-size: 1rem;
      max-width: 100%;
    }

    .hero-img {
      width: 130px;
      height: 130px;
      margin: 1rem 0;
    }

    .hero-btns {
      flex-direction: column;
      align-items: center;
      gap: 0.8rem;
      width: 100%;
      max-width: 300px;
    }

    .btn {
      width: 100%;
      max-width: 250px;
      justify-content: center;
      padding: 14px 20px;
      font-size: 16px;
    }
    
    .section {
      padding: 3rem 1rem;
    }

    .section-title {
      font-size: 1.7rem;
      margin-bottom: 2rem;
    }
    
    .skills-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .skill-type {
      padding: 1.5rem 1.2rem;
    }

    .projects-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .contact-grid {
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
    }

    .contact-item {
      padding: 1.5rem 1rem;
      min-height: 120px;
    }

    .contact-item i {
      font-size: 1.5rem;
      margin-bottom: 0.8rem;
    }
    
    .modal-content {
      margin: 1rem;
      padding: 1.5rem;
      max-height: 75vh;
    }
    
    #totop {
      right: 1rem;
      bottom: 1rem;
      width: 45px;
      height: 45px;
      font-size: 1.3rem;
      display: none;
    }

    .timeline {
      padding-left: 1.5rem;
    }

    .timeline-item {
      padding: 1.2rem 1.2rem 1.2rem 2.5rem;
    }

    .timeline-marker {
      left: -1.7rem;
      width: 18px;
      height: 18px;
      top: 1.2rem;
    }

    .certifications {
      padding: 1.5rem 1.2rem;
    }
  }

  @media (max-width: 480px) {
    :root {
      --h1: 1.9rem;
      --h2: 1.6rem;
    }

    header {
      padding: 0.8rem 0.8rem;
      min-height: 60px;
    }

    .logo {
      font-size: 1.2rem;
    }
    
    .header-controls {
      gap: 0.5rem;
    }
    
    #theme-toggle {
      padding: 0.4rem;
      min-width: 44px;
      min-height: 44px;
    }

    .hamburger {
      min-width: 44px;
      min-height: 44px;
      padding: 0.4rem;
    }
    
    .nav-mobile {
      width: 100vw;
      padding: 5rem 1.5rem 2rem;
    }
    
    #hero {
      padding: 90px 0.8rem 1.5rem;
    }

    #hero h1 {
      font-size: 1.7rem;
    }

    #typing {
      font-size: 0.95rem;
    }

    #hero p {
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .section {
      padding: 2.5rem 0.8rem;
    }

    .hero-img {
      width: 110px;
      height: 110px;
    }

    .contact-item {
      padding: 1.2rem 0.8rem;
    }

    .project-img {
      height: 160px;
    }

    .card-content {
      padding: 1.2rem;
    }

    .skill-type {
      padding: 1.2rem;
    }

    .timeline-item {
      padding: 1rem 1rem 1rem 2.2rem;
    }

    .certifications {
      padding: 1.2rem 1rem;
    }

    .modal-content {
      padding: 1.2rem;
      margin: 0.5rem;
    }
  }
  </style>
</head>

<body class="loading" data-theme="light">
  <!-- Loader -->
  <div id="loader"><div class="spinner"></div></div>

  <!-- Header -->
  <header>
    <span class="logo"><i class="fa-solid fa-code"></i> Ashim Bakshi</span>
    
    <nav>
      <a href="#hero">Home</a>
      <a href="#skills">Skills</a>
      <a href="#projects">Projects</a>
      <a href="#education">Education</a>
      <a href="#contact">Contact</a>
    </nav>
    
    <div class="header-controls">
      <button id="theme-toggle" aria-label="Toggle theme">
        <i class="fa-solid fa-moon"></i>
        <span>Dark</span>
      </button>
      <button class="hamburger">
        <i class="fa-solid fa-bars"></i>
      </button>
    </div>
  </header>

  <!-- Mobile Navigation Overlay -->
  <div class="nav-overlay" id="nav-overlay"></div>
  <nav class="nav-mobile" id="nav-mobile">
    <a href="#hero">Home</a>
    <a href="#skills">Skills</a>
    <a href="#projects">Projects</a>
    <a href="#education">Education</a>
    <a href="#contact">Contact</a>
  </nav>

  <!-- Hero Section -->
  <section id="hero" class="section visible">
    <div class="particles"></div>
    <div id="hero-content">
      <img src="Ashim.jpg" class="hero-img" alt="Ashim Bakshi">
      <h1>Hello, I'm <span style="color:#06b6d4;">Ashim Bakshi</span></h1>
      <div id="typing"></div>
      <p>Electronics & Telecom Engineering Student passionate about creating innovative digital solutions and exploring cutting-edge technology. Welcome to my digital world! 🌟</p>
      <div class="hero-btns">
        <a class="btn" href="AshimBakshi-CV.pdf" download><i class="fa-solid fa-download"></i> Resume</a>
        <a class="btn" href="#projects"><i class="fa-solid fa-folder-open"></i> Projects</a>
        <a class="btn" href="https://github.com/AshimBakshi2004" target="_blank"><i class="fa-brands fa-github"></i></a>
        <a class="btn" href="https://linkedin.com/in/ashim-bakshi-532176334" target="_blank"><i class="fa-brands fa-linkedin"></i></a>
      </div>
    </div>
  </section>

  <!-- Skills Section -->
  <section id="skills" class="section">
    <div class="section-title">Skills & Expertise</div>
    <div class="skills-grid">
      <div class="skill-type">
        <h3>Technical Skills</h3>
        <ul class="skills-list">
          <li>C Programming</li><li>Python</li><li>HTML5</li><li>CSS3</li>
          <li>JavaScript</li><li>MySQL</li><li>Git/GitHub</li><li>React</li>
        </ul>
        <div class="bars">
          <div class="bar-title">Python Development</div>
          <div class="bar-bg"><div class="bar-fg" data-width="88%"></div></div>
          <div class="bar-title">Web Technologies</div>
          <div class="bar-bg"><div class="bar-fg" data-width="92%"></div></div>
          <div class="bar-title">C Programming</div>
          <div class="bar-bg"><div class="bar-fg" data-width="85%"></div></div>
          <div class="bar-title">Database Management</div>
          <div class="bar-bg"><div class="bar-fg" data-width="78%"></div></div>
        </div>
      </div>
      <div class="skill-type">
        <h3>Soft Skills</h3>
        <ul class="skills-list">
          <li>Team Leadership</li><li>Project Management</li>
          <li>Communication</li><li>Problem Solving</li>
          <li>Time Management</li><li>Creative Thinking</li>
        </ul>
        <div class="bars">
          <div class="bar-title">Communication</div>
          <div class="bar-bg"><div class="bar-fg" data-width="95%"></div></div>
          <div class="bar-title">Team Collaboration</div>
          <div class="bar-bg"><div class="bar-fg" data-width="90%"></div></div>
          <div class="bar-title">Problem Solving</div>
          <div class="bar-bg"><div class="bar-fg" data-width="88%"></div></div>
          <div class="bar-title">Leadership</div>
          <div class="bar-bg"><div class="bar-fg" data-width="85%"></div></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Projects Section - ONLY 2 PROJECTS -->
  <section id="projects" class="section">
    <div class="section-title">Featured Projects</div>
    <div class="projects-grid">
      <div class="project-card">
        <img class="project-img" src="AiROBO.jpg" alt="AI Robotics">
        <div class="card-content">
          <div class="card-title">AI-Powered Robotics</div>
          <div class="card-desc">Advanced autonomous robot with AI navigation, obstacle detection, and intelligent decision-making capabilities.</div>
          <div class="tech-tags">
            <span class="tech">Python</span><span class="tech">AI/ML</span><span class="tech">Arduino</span><span class="tech">Computer Vision</span>
          </div>
          <button class="view-btn" data-modal="0">View Details</button>
        </div>
      </div>
      <div class="project-card">
        <img class="project-img" src="logo.jpg" alt="LibNest">
        <div class="card-content">
          <div class="card-title">LibNest - Library Management</div>
          <div class="card-desc">Modern library management system with intuitive UI, real-time inventory tracking, and user analytics.</div>
          <div class="tech-tags">
            <span class="tech">React</span><span class="tech">Node.js</span><span class="tech">MongoDB</span><span class="tech">Express</span>
          </div>
          <button class="view-btn" data-modal="1">View Details</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Education Section -->
  <section id="education" class="section">
    <div class="section-title">Education & Achievements</div>
    <div class="timeline">
      <div class="timeline-item">
        <span class="timeline-marker"><i class="fa-solid fa-graduation-cap"></i></span>
        <div class="timeline-title">Diploma in Electronics & Telecom Engineering</div>
        <div class="timeline-desc">
          <strong>Falakata Polytechnic, WB</strong><br>
          Current GPA: 8.74 (Till 5th Semester)<br>
          <em>Expected Graduation: 2025</em>
        </div>
      </div>
      <div class="timeline-item">
        <span class="timeline-marker"><i class="fa-solid fa-school"></i></span>
        <div class="timeline-title">Higher Secondary (Vocational - ETEM)</div>
        <div class="timeline-desc">
          <strong>Birpara High School (WBSCT&VE)</strong><br>
          Percentage: 79.4%<br>
          <em>Completed: 2021-2022</em>
        </div>
      </div>
    </div>
    
    <div class="certifications">
      <h3>Professional Certifications</h3>
      <ul>
        <li>Advanced Certificate in Computer Application (6 Months, 2020-2022)</li>
        <li>Google & MIT RAISE - Generative AI for Educators (2025)</li>
        <li>Microsoft & LinkedIn - Career Essentials in Generative AI (2025)</li>
        <li>NPTEL+ Workshop - Lean Startup Methodology (2025)</li>
        <li>Wadhwani Foundation - Employability Skills (2025)</li>
      </ul>
    </div>
  </section>

  <!-- Contact Section -->
  <section id="contact" class="section">
    <div class="section-title">Let's Connect</div>
    <div class="contact-grid">
      <div class="contact-item">
        <i class="fa-solid fa-envelope"></i>
        <div><strong>Email</strong></div>
        <a class="contact-link" href="mailto:ashimbakshi007@gmail.com">ashimbakshi007@gmail.com</a>
      </div>
      <div class="contact-item">
        <i class="fa-solid fa-phone"></i>
        <div><strong>Phone</strong></div>
        <a class="contact-link" href="tel:+917047761252">+91 70477 61252</a>
      </div>
      <div class="contact-item">
        <i class="fa-brands fa-linkedin"></i>
        <div><strong>LinkedIn</strong></div>
        <a class="contact-link" href="https://linkedin.com/in/ashim-bakshi-532176334" target="_blank">Connect with me</a>
      </div>
      <div class="contact-item">
        <i class="fa-brands fa-github"></i>
        <div><strong>GitHub</strong></div>
        <a class="contact-link" href="https://github.com/AshimBakshi2004" target="_blank">View my code</a>
      </div>
    </div>
  </section>

  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <button class="modal-close"><i class="fa-solid fa-xmark"></i></button>
      <h3>Project Title</h3>
      <p>Project details will load here...</p>
    </div>
  </div>

  <!-- Back to Top -->
  <button id="totop"><i class="fa-solid fa-angle-up"></i></button>

  <!-- Footer -->
  <footer>
    <p>&copy; 2025 Ashim Bakshi. Crafted with ❤️ and lots of ☕</p>
  </footer>

<script>
// Loader
window.addEventListener('DOMContentLoaded', () => {
  setTimeout(() => {
    document.getElementById('loader').style.opacity = '0';
    setTimeout(() => {
      document.getElementById('loader').style.display = 'none';
      document.body.classList.remove('loading');
    }, 800);
  }, 1200);
});

// Theme Toggle - MOBILE DEVICE FIX
function setTheme(theme) {
  document.documentElement.setAttribute('data-theme', theme);
  document.body.setAttribute('data-theme', theme);
  
  try {
    localStorage.setItem('theme', theme);
  } catch (e) {
    console.warn('Could not save theme to localStorage:', e);
  }
  
  const toggle = document.getElementById('theme-toggle');
  if (toggle) {
    const icon = toggle.querySelector('i');
    const text = toggle.querySelector('span');
    
    if (theme === 'dark') {
      icon.className = 'fa-solid fa-sun';
      if (text) text.textContent = 'Light';
      toggle.setAttribute('aria-label', 'Switch to light mode');
    } else {
      icon.className = 'fa-solid fa-moon';
      if (text) text.textContent = 'Dark';
      toggle.setAttribute('aria-label', 'Switch to dark mode');
    }
  }
}

function initializeTheme() {
  let savedTheme = 'light';
  
  try {
    savedTheme = localStorage.getItem('theme');
  } catch (e) {
    console.warn('Could not read theme from localStorage:', e);
  }
  
  if (!savedTheme) {
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      savedTheme = 'dark';
    } else {
      savedTheme = 'light';
    }
  }
  
  setTheme(savedTheme);
}

function handleThemeToggle(e) {
  if (e) {
    e.preventDefault();
    e.stopPropagation();
  }
  
  const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  setTheme(newTheme);
}

// MOBILE FIX - Initialize theme toggle
document.addEventListener('DOMContentLoaded', function() {
  initializeTheme();
  
  const themeToggle = document.getElementById('theme-toggle');
  if (themeToggle) {
    // Remove any existing listeners by cloning
    themeToggle.replaceWith(themeToggle.cloneNode(true));
    const newThemeToggle = document.getElementById('theme-toggle');
    
    // Check if it's a touch device
    const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
    
    if (isTouchDevice) {
      // For mobile/touch devices
      newThemeToggle.addEventListener('touchstart', function(e) {
        e.preventDefault();
        e.stopPropagation();
        handleThemeToggle(e);
      }, { passive: false });
      
      // Backup for mobile browsers that need click
      newThemeToggle.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
      });
    } else {
      // For desktop
      newThemeToggle.addEventListener('click', handleThemeToggle);
    }
  }
});

// Section reveal animation
function revealSections() {
  const sections = document.querySelectorAll('.section');
  sections.forEach(section => {
    const top = section.getBoundingClientRect().top;
    if (top < window.innerHeight - 100) {
      section.classList.add('visible');
    }
  });
}

window.addEventListener('scroll', revealSections);
window.addEventListener('load', revealSections);

// Typing animation
const texts = [
  "Electronics & Telecom Student",
  "Frontend Developer", 
  "Problem Solver",
  "Tech Enthusiast"
];
let textIndex = 0, charIndex = 0, isDeleting = false;

function typeText() {
  const element = document.getElementById('typing');
  if (!element) return;
  
  const currentText = texts[textIndex];
  
  if (isDeleting) {
    element.textContent = currentText.substring(0, charIndex - 1);
    charIndex--;
  } else {
    element.textContent = currentText.substring(0, charIndex + 1);
    charIndex++;
  }
  
  if (!isDeleting && charIndex === currentText.length) {
    setTimeout(() => isDeleting = true, 2000);
  } else if (isDeleting && charIndex === 0) {
    isDeleting = false;
    textIndex = (textIndex + 1) % texts.length;
  }
  
  setTimeout(typeText, isDeleting ? 50 : 100);
}

typeText();

// Particles animation
function createParticles() {
  const canvas = document.createElement('canvas');
  canvas.className = 'particles';
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  const ctx = canvas.getContext('2d');
  
  const particles = [];
  const particleCount = window.innerWidth < 768 ? 20 : 40;
  
  for (let i = 0; i < particleCount; i++) {
    particles.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      size: Math.random() * 3 + 1,
      speedX: (Math.random() - 0.5) * 1.5,
      speedY: (Math.random() - 0.5) * 1.5,
      opacity: Math.random() * 0.4 + 0.2
    });
  }
  
  function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    particles.forEach(particle => {
      particle.x += particle.speedX;
      particle.y += particle.speedY;
      
      if (particle.x > canvas.width) particle.x = 0;
      if (particle.x < 0) particle.x = canvas.width;
      if (particle.y > canvas.height) particle.y = 0;
      if (particle.y < 0) particle.y = canvas.height;
      
      ctx.beginPath();
      ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(124, 58, 237, ${particle.opacity})`;
      ctx.fill();
    });
    
    requestAnimationFrame(animate);
  }
  
  animate();
  
  const hero = document.getElementById('hero');
  const existingCanvas = hero.querySelector('canvas');
  if (existingCanvas) hero.removeChild(existingCanvas);
  hero.appendChild(canvas);
}

createParticles();
window.addEventListener('resize', createParticles);

// Mobile Navigation Control - FIXED
const hamburger = document.querySelector('.hamburger');
const navMobile = document.getElementById('nav-mobile');
const navOverlay = document.getElementById('nav-overlay');
const hamburgerIcon = hamburger ? hamburger.querySelector('i') : null;

function toggleMobileNav(e) {
  if (e) {
    e.preventDefault();
    e.stopPropagation();
  }
  
  const isOpen = navMobile.classList.contains('open');
  
  if (isOpen) {
    closeMobileNav();
  } else {
    openMobileNav();
  }
}

function openMobileNav() {
  navMobile.classList.add('open');
  navOverlay.classList.add('active');
  if (hamburgerIcon) {
    hamburgerIcon.classList.remove('fa-bars');
    hamburgerIcon.classList.add('fa-times');
  }
  document.body.style.overflow = 'hidden';
}

function closeMobileNav() {
  navMobile.classList.remove('open');
  navOverlay.classList.remove('active');
  if (hamburgerIcon) {
    hamburgerIcon.classList.add('fa-bars');
    hamburgerIcon.classList.remove('fa-times');
  }
  document.body.style.overflow = 'auto';
}

// FIXED - Mobile hamburger menu
if (hamburger) {
  const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
  
  if (isTouchDevice) {
    hamburger.addEventListener('touchstart', function(e) {
      e.preventDefault();
      e.stopPropagation();
      toggleMobileNav(e);
    }, { passive: false });
  } else {
    hamburger.addEventListener('click', toggleMobileNav);
  }
}

if (navOverlay) {
  navOverlay.addEventListener('click', closeMobileNav);
  navOverlay.addEventListener('touchstart', closeMobileNav);
}

// Close mobile nav when clicking on links
document.querySelectorAll('.nav-mobile a').forEach(link => {
  link.addEventListener('click', (e) => {
    closeMobileNav();
  });
  link.addEventListener('touchstart', (e) => {
    setTimeout(closeMobileNav, 100);
  });
});

// Desktop Navigation
document.querySelectorAll('nav a').forEach(link => {
  link.addEventListener('click', (e) => {
    e.preventDefault();
    const target = document.querySelector(link.getAttribute('href'));
    if (target) {
      target.scrollIntoView({ behavior: 'smooth' });
    }
  });
});

// Navigation Highlighting
function highlightActiveNav() {
  const sections = ['hero', 'skills', 'projects', 'education', 'contact'];
  const navLinks = document.querySelectorAll('nav a, .nav-mobile a');
  
  let current = '';
  sections.forEach(section => {
    const element = document.getElementById(section);
    if (element) {
      const rect = element.getBoundingClientRect();
      if (rect.top <= 100 && rect.bottom >= 100) {
        current = section;
      }
    }
  });
  
  navLinks.forEach(link => {
    link.classList.remove('active');
    if (link.getAttribute('href') === `#${current}`) {
      link.classList.add('active');
    }
  });
}

window.addEventListener('scroll', highlightActiveNav);
window.addEventListener('load', highlightActiveNav);

// Skill bars animation
function animateSkillBars() {
  const skillSection = document.querySelector('#skills');
  if (skillSection && skillSection.getBoundingClientRect().top < window.innerHeight - 200) {
    document.querySelectorAll('.bar-fg').forEach(bar => {
      const width = bar.getAttribute('data-width');
      if (width && !bar.classList.contains('animated')) {
        bar.style.width = width;
        bar.classList.add('animated');
      }
    });
  }
}

window.addEventListener('scroll', animateSkillBars);

// Project cards stagger animation
function staggerProjectCards() {
  const projectSection = document.querySelector('#projects');
  if (projectSection && projectSection.getBoundingClientRect().top < window.innerHeight - 200) {
    document.querySelectorAll('.project-card').forEach((card, index) => {
      if (!card.classList.contains('visible')) {
        setTimeout(() => card.classList.add('visible'), index * 200);
      }
    });
  }
}

window.addEventListener('scroll', staggerProjectCards);

// Modal functionality - FOR 2 PROJECTS ONLY
const projectData = [
  {
    title: "AI-Powered Robotics System",
    description: "Advanced autonomous robot featuring AI navigation, obstacle detection, and machine learning capabilities. Built with Arduino, Python, and computer vision libraries for intelligent decision-making and real-time environment interaction.",
    technologies: ["Python", "Arduino", "OpenCV", "TensorFlow", "Computer Vision"],
    features: ["Autonomous Navigation", "Obstacle Detection", "Machine Learning", "Real-time Processing"],
  },
  {
    title: "LibNest - Library Management System", 
    description: "Modern, full-stack library management platform with intuitive user interface, real-time inventory tracking, and comprehensive analytics dashboard. Built for scalability and ease of use.",
    technologies: ["React", "Node.js", "MongoDB", "Express", "JWT"],
    features: ["User Management", "Inventory Tracking", "Analytics Dashboard", "Real-time Updates"],
  }
];

// FIXED - Modal Events for Mobile
document.querySelectorAll('.view-btn').forEach((btn, index) => {
  const handleModal = (e) => {
    if (e) {
      e.preventDefault();
      e.stopPropagation();
    }
    
    const project = projectData[index] || {
      title: "Project Details",
      description: "Detailed information about this project will be available soon.",
      technologies: ["Coming Soon"],
      features: ["More details coming soon"]
    };
    
    const modal = document.getElementById('modal');
    const content = modal.querySelector('.modal-content');
    
    content.innerHTML = `
      <button class="modal-close"><i class="fa-solid fa-xmark"></i></button>
      <h3>${project.title}</h3>
      <p>${project.description}</p>
      <div class="tech-tags">
        ${project.technologies.map(tech => `<span class="tech">${tech}</span>`).join('')}
      </div>
      <div style="margin-top: 1rem;">
        <strong>Key Features:</strong>
        <ul style="margin: 0.5rem 0; padding-left: 1.5rem;">
          ${project.features.map(feature => `<li>${feature}</li>`).join('')}
        </ul>
      </div>
    `;
    
    modal.classList.add('active');
    
    // Add event listeners to the new close button
    const closeBtn = content.querySelector('.modal-close');
    if (closeBtn) {
      const handleClose = (e) => {
        if (e) {
          e.preventDefault();
          e.stopPropagation();
        }
        modal.classList.remove('active');
      };
      
      const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
      
      if (isTouchDevice) {
        closeBtn.addEventListener('touchstart', handleClose, { passive: false });
      } else {
        closeBtn.addEventListener('click', handleClose);
      }
    }
  };
  
  // Apply same touch detection logic
  const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
  
  if (isTouchDevice) {
    btn.addEventListener('touchstart', function(e) {
      e.preventDefault();
      handleModal(e);
    }, { passive: false });
  } else {
    btn.addEventListener('click', handleModal);
  }
});

// Close modal
const handleModalClose = (e) => {
  if (e.target.classList.contains('modal')) {
    document.getElementById('modal').classList.remove('active');
  }
};

document.addEventListener('click', handleModalClose);
document.addEventListener('touchstart', handleModalClose);

// FIXED - Back to top button
const backToTop = document.getElementById('totop');

window.addEventListener('scroll', () => {
  if (window.scrollY > 300) {
    backToTop.style.display = 'flex';
  } else {
    backToTop.style.display = 'none';
  }
});

if (backToTop) {
  const handleBackToTop = (e) => {
    if (e) {
      e.preventDefault();
      e.stopPropagation();
    }
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
  
  if (isTouchDevice) {
    backToTop.addEventListener('touchstart', handleBackToTop, { passive: false });
  } else {
    backToTop.addEventListener('click', handleBackToTop);
  }
}

// FIXED - Hero Buttons
document.querySelectorAll('.hero-btns .btn').forEach(btn => {
  btn.addEventListener('click', function(e) {
    if (this.href && this.href.startsWith('#')) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({ behavior: 'smooth' });
      }
    }
  });
});

// Keyboard navigation
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    closeMobileNav();
    document.getElementById('modal').classList.remove('active');
  }
});
</script>
</body>
</html>
